# -- Default number of instances to start 
replicaCount: 1
# -- Application name
name: dps
# -- Overwrites application name
# nameOverride: ""

image:
  # repository: registry.gitlab.com/gaia-x/data-infrastructure-federation-services
  repository: ds4h-registry:5432
  # -- Image name
  name: data-provision
  # -- Image tag
  # Uses .Chart.AppVersion if empty
  tag: latest
  # -- Image sha, usually generated by the CI
  # Uses image.tag if empty
  sha: ""
  # -- Image pull policy
  pullPolicy: Always
  # -- Image pull secret when internal image is used
  pullSecrets:

# -- Enable the component
enabled: true

# -- Pod annotations
podAnnotations: {}

# Horizontal Pod Autoscaler
autoscaling:
  # -- Enable Horizontal Pod Autoscaler
  enabled: false
  # -- Minimum number of replicas
  minReplicas: 2
  # -- Maximum number of replicas
  maxReplicas: 3
  # -- Target CPU utilization percentage
  targetCPUUtilizationPercentage: 70
  # -- Target memory utilization percentage
  targetMemoryUtilizationPercentage: 70


metrics:
  # -- Enable prometheus metrics
  enabled: false #true
  # -- Port for prometheus metrics
  port: 2112

log:
  level: "debug"
  encoding: json


##
## Kubernetes [SecurityContext](https://kubernetes.io/docs/tasks/configure-pod-container/security-context/) object.
##

security:
  # -- by default, apps run as non-root
  runAsNonRoot: false
  # -- User used by the apps
  runAsUid: 0
  # -- Group used by the apps
  runAsGid: 0
##
##

# Service configuration
service:
  type: ClusterIP
  port: 3000
  targetPort: 3000
  protocol: TCP

# Application configuration
config:
  # -- Environment (development, staging, production)
  environment: "development"
  # -- API configuration
  
  api:
    baseUrl: "https://dataspace4health.local"
    basePath: '/data/api/v1'
  
  # -- OIDC configuration
  oidcIssuer: ""
  oidcClientId: ""
  oidcClientSecret: ""
  oidcScope: "openid profile"
  oidcRedirectUri: ""
  oidcResponseType: "code"
  oidcPostLogoutRedirectUri: ""

  # -- HTTP configuration
  http:
    host: ""
    port: 3000

# Ingress configuration
ingress:
  enabled: true
  hosts:
    - paths:
      - path: /data/api/v1
        port: 3000
        pathType: Prefix
  tls:
    - secretName: dataspace4health.local
      hosts:
        - dataspace4health.local
